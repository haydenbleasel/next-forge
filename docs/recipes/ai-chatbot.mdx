---
title: Create an AI Chatbot
description: Let's use next-forge to create a simple AI chatbot.
---

Today we're going to create an AI chatbot using next-forge and the built-in AI package, powered by [Vercel AI SDK](https://sdk.vercel.ai/).

<Frame>
  <img src="/images/ai-chatbot.png" style={{ borderRadius: '0.5rem' }} />
</Frame>

## 1. Create a new project

```bash Terminal
npx next-forge@latest init ai-chatbot
```

This will create a new project with the name `ai-chatbot` and install the necessary dependencies.

## 2. Configure your environment variables

Follow the guide on [Environment Variables](/env) to fill in your environment variables.

Specifically, make sure you set an `OPENAI_API_KEY` environment variable.

<Tip>Make sure you have some credits in your OpenAI account.</Tip>

## 3. Install the required packages

next-forge comes with almost everything you need to build an AI chatbot. The only package we'll need is called `react-markdown`, which we'll use to render the chatbot's responses.

```sh Terminal
pnpm add react-markdown --filter app
```

## 4. Create the chatbot UI

We're going to start by creating a simple chatbot UI with a text input and a button to send messages.

Create a new file called `Chatbot` in the `app/components` directory. We're going to use a few things here:

- `useChat` from our AI package to handle the chat logic.
- `Button` and `Input` from our Design System to render the form.
- `cn` from our Design System to merge class names.
- `handleError` from our Design System to handle errors.
- `SendIcon` from `lucide-react` to create a send icon.
- `Markdown` from `react-markdown` to render the chatbot's responses.

```tsx apps/app/app/(authenticated)/components/chatbot.tsx
'use client';

import { useChat } from '@repo/ai/react';
import { Button } from '@repo/design-system/components/ui/button';
import { Input } from '@repo/design-system/components/ui/input';
import { cn, handleError } from '@repo/design-system/lib/utils';
import { SendIcon } from 'lucide-react';
import Markdown from 'react-markdown';

export const Chatbot = () => {
  const { messages, input, handleInputChange, isLoading, handleSubmit } =
    useChat({
      onError: handleError,
      api: '/api/chat',
    });

  return (
    <div className="flex h-[calc(100vh-64px-16px)] flex-col divide-y overflow-hidden">
      <div className="flex flex-1 flex-col items-start gap-4 overflow-y-auto p-8 pb-0">
        {messages.map((message, index) => (
          <div
            key={`${message.role}-${index}`}
            className={cn(
              'flex max-w-[80%] flex-col gap-2 rounded-xl px-4 py-2',
              message.role === 'user'
                ? 'self-end bg-foreground text-background'
                : 'self-start bg-muted'
            )}
          >
            <Markdown>{message.content}</Markdown>
          </div>
        ))}
      </div>
      <form
        onSubmit={handleSubmit}
        className="flex shrink-0 items-center gap-2 px-8 py-4"
        aria-disabled={isLoading}
      >
        <Input
          placeholder="Ask a question!"
          value={input}
          onChange={handleInputChange}
        />
        <Button type="submit" size="icon" disabled={isLoading}>
          <SendIcon className="h-4 w-4" />
        </Button>
      </form>
    </div>
  );
};
```

## 5. Create the chatbot API route

Create a new file called `chat` in the `app/api` directory. This Next.js route handler will handle the chatbot's responses.

We're going to use the `streamText` function from our AI package to stream the chatbot's responses to the client. We'll also use the `provider` function from our AI package to get the OpenAI provider, and the `log` function from our Observability package to log the chatbot's responses.

```tsx apps/app/app/api/chat.ts
import { streamText } from '@repo/ai';
import { provider } from '@repo/ai/provider';
import { log } from '@repo/observability/log';

export const POST = async (req: Request) => {
  const body = await req.json();

  log.info('ðŸ¤– Chat request received.', { body });
  const { messages } = body;

  log.info('ðŸ¤– Generating response...');
  const result = streamText({
    model: provider('gpt-4'),
    system: 'You are a helpful assistant.',
    messages,
  });

  log.info('ðŸ¤– Streaming response...');
  return result.toDataStreamResponse();
};
```

## 6. Update the app

Finally, we'll update the `app/page.tsx` file to be a simple entry point that renders the chatbot UI.

```tsx apps/app/app/(authenticated)/page.tsx
import { auth } from '@repo/auth/server';
import type { Metadata } from 'next';
import { notFound } from 'next/navigation';
import { Chatbot } from './components/chatbot';
import { Header } from './components/header';

const title = 'Acme Inc';
const description = 'My application.';

export const metadata: Metadata = {
  title,
  description,
};

const App = async () => {
  const { orgId } = await auth();

  if (!orgId) {
    notFound();
  }

  return (
    <>
      <Header pages={['Building Your Application']} page="AI Chatbot" />
      <Chatbot />
    </>
  );
};

export default App;
```

## 7. Run the app

Run the app development server and you should be able to see the chatbot UI at [http://localhost:3000](http://localhost:3000).

```sh Terminal
pnpm dev --filter app
```

That's it! You've now created an AI chatbot using next-forge and the built-in AI package. If you have any questions, please reach out to me on [Twitter](https://x.com/haydenbleasel) or open an issue on [GitHub](https://github.com/haydenbleasel/next-forge).
